<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Generador de Personajes</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        /* Estilos espec√≠ficos para la hoja de personaje */
        .sheet-header {
            text-align: center;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .import-zone {
            background: #e3f2fd;
            padding: 15px;
            border: 2px dashed #2980b9;
            border-radius: 8px;
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }
        .import-zone:hover {
            background: #d4ebfb;
            border-color: #1a5276;
        }
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 5px;
            margin: 15px 0;
            text-align: center;
            background: #eee;
            padding: 10px;
            border-radius: 5px;
        }
        /* Ajuste responsive para stats */
        @media (max-width: 600px) {
            .stat-grid { grid-template-columns: repeat(3, 1fr); gap: 10px; }
        }
    </style>
</head>
<body>
<header>
    <div class="brand">‚öîÔ∏è Forja de H√©roes</div>
    <a href="../index.html" class="back-btn">‚¨Ö Volver al Men√∫</a>
</header>

<div class="generator-layout">
    <div class="panel">

        <div class="import-zone">
            <h3 style="margin-top:0; color:#2980b9; font-size:1rem;">üì• Importar desde Foundry VTT</h3>
            <p style="font-size:0.85rem; color:#555; margin-bottom:10px;">
                Sube tu ficha <code>.json</code> para guardarla en el historial y ense√±ar nuevas razas/clases a la IA.
            </p>

            <div style="display:flex; flex-direction:column; gap:10px;">
                <input type="file" id="foundryFile" accept=".json"
                       style="background:white; padding:5px; border-radius:4px; border:1px solid #bdc3c7;">
                <button id="btnImport" class="btn-generate"
                        style="background:#2980b9; width:100%; margin:0; padding:8px;">
                    Procesar Ficha
                </button>
            </div>
            <div id="importStatus" style="margin-top:10px; font-size:0.85rem; font-weight:bold; min-height:20px;"></div>
        </div>

        <hr style="border:0; border-top:1px solid #ddd; margin: 20px 0;">

        <h2>Crear Nuevo Personaje</h2>

        <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; margin-bottom:15px;">
            <div>
                <label>Nivel</label>
                <input type="number" id="level" value="1" min="1" max="20">
            </div>
            <div>
                <label>Raza (Biblio)</label>
                <select id="raceSelect" style="width:100%;">
                    <option value="">Cualquiera</option>
                </select>
            </div>
            <div>
                <label>Clase (Biblio)</label>
                <select id="classSelect" style="width:100%;">
                    <option value="">Cualquiera</option>
                </select>
            </div>
        </div>

        <label>Concepto / Descripci√≥n</label>
        <textarea id="desc" rows="4"
                  placeholder="Ej: Un palad√≠n ca√≠do que busca redenci√≥n en los barrios bajos..."></textarea>

        <button class="btn-generate" id="btnGen">Invocar Personaje</button>
        <button class="btn-export" id="btnExp" style="display:none; background:#27ae60;">Exportar JSON (Foundry)
        </button>
    </div>

    <div class="panel result-panel">
        <div id="loader" class="loader">üé≤ Tirando caracter√≠sticas...</div>
        <div id="resultContent">
            <div style="text-align:center; margin-top:100px; color:#aaa;">
                <p style="font-size:3rem; margin:0;">üõ°Ô∏è</p>
                <p>Configura o importa un personaje para empezar.</p>
            </div>
        </div>
    </div>

    <div class="history-panel">
        <div class="history-header">üèõÔ∏è Sal√≥n de H√©roes</div>
        <div class="history-list" id="historyList">
        </div>
    </div>
</div>

<script src="../js/history/config.js"></script>
<script src="../js/history/manager.js"></script>
<script src="../js/character.js"></script>
</body>
</html>